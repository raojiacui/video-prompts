# Remotion 视频剪辑教程 - 8场景帐篷视频拼接

## 项目概述

使用 Remotion 框架将8个帐篷视频拼接成一部完整作品，每个场景配有中文字幕和背景音乐。

---

## 一、项目准备

### 1.1 项目路径
```
C:/Users/雨下雨停/remotion-video-edit
```

### 1.2 视频文件
**源文件位置：**
```
D:/雨下雨停/OneDrive/文档/jn1.mp4 ~ jn8.mp4
```

**使用的处理后文件：**
```
public/videos/jn1_fixed.mp4 ~ jn8_fixed.mp4
```

### 1.3 音乐文件
```
D:/雨下雨停/OneDrive/文档/xwechat_files/.../2026年02月26日 12点57分.m4a
```
复制到：`public/background_music.m4a`

### 1.4 字幕列表
| 场景 | 字幕 |
|------|------|
| 1 | 荒漠储水帐篷 |
| 2 | 漂浮钓鱼帐篷 |
| 3 | 崖壁观景帐篷 |
| 4 | 警戒安防帐篷 |
| 5 | 火山特化帐篷 |
| 6 | 冰壁内嵌帐篷 |
| 7 | 飞行帐篷 |
| 8 | （无字幕） |

---

## 二、核心代码

### 2.1 VideoEdit.tsx - 主组件

```tsx
import { AbsoluteFill, Video, Audio, useCurrentFrame } from "remotion";

const SCENE_DURATIONS = [240, 240, 240, 240, 240, 239, 240, 240];

const DEFAULT_SUBTITLES = [
  "荒漠储水帐篷", "漂浮钓鱼帐篷", "崖壁观景帐篷", "警戒安防帐篷",
  "火山特化帐篷", "冰壁内嵌帐篷", "飞行帐篷", ""
];

export const VideoEdit = ({ videoPaths, subtitles, musicPath }) => {
  const frame = useCurrentFrame();
  
  // 计算当前场景
  let accumulated = 0, sceneIndex = 0;
  for (let i = 0; i < SCENE_DURATIONS.length; i++) {
    if (frame < accumulated + SCENE_DURATIONS[i]) {
      sceneIndex = i;
      break;
    }
    accumulated += SCENE_DURATIONS[i];
  }

  return (
    <AbsoluteFill>
      <Audio src={musicPath} />
      <Video src={videoPaths[sceneIndex]} />
      {subtitles[sceneIndex] && <Subtitle text={subtitles[sceneIndex]} />}
    </AbsoluteFill>
  );
};
```

### 2.2 Root.tsx - 配置

```tsx
<Composition
  id="VideoEdit"
  component={VideoEdit}
  durationInFrames={1919}
  fps={30}
  width={1920}
  height={1080}
  defaultProps={{
    videoPaths: [
      staticFile("videos/jn1_fixed.mp4"),
      // ... jn2~jn8
    ],
    subtitles: ["荒漠储水帐篷", "漂浮钓鱼帐篷", ...],
    musicPath: staticFile("background_music.m4a")
  }}
/>
```

---

## 三、使用命令

### 3.1 开发预览
```bash
cd C:/Users/雨下雨停/remotion-video-edit
pnpm start
```
访问：http://localhost:3000

### 3.2 渲染最终视频
```bash
pnpm build
```

### 3.3 输出位置
```
out/video.mp4
```

---

## 四、技术要点

### 4.1 无缝切换原理
不使用 `Series` 组件，而是通过 `useCurrentFrame()` 计算当前应该显示哪个视频，确保场景间无黑屏。

### 4.2 字幕样式
- 位置：屏幕顶部
- 字体：微软雅黑，56px
- 背景：半透明黑色渐变

### 4.3 视频参数
| 参数 | 值 |
|------|-----|
| 分辨率 | 1920x1080 |
| 帧率 | 30fps |
| 总时长 | ~64秒 |

---

## 五、文件结构
```
remotion-video-edit/
├── public/
│   ├── videos/          # 视频文件
│   └── background_music.m4a
├── src/
│   ├── Root.tsx         # 配置
│   └── VideoEdit.tsx    # 主组件
└── out/
    └── video.mp4        # 输出
```
