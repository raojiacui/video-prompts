# 视频剪辑过程 - FFmpeg 拼接与 R2 上传

---

## 一、FFmpeg 视频拼接

### 1. 创建文件列表

```bash
cd "D:/雨下雨停/OneDrive/文档/"
for i in {1..8}; do echo "file 'f$i.mp4'"; done > filelist.txt
```

### 2. 执行拼接

```bash
ffmpeg -f concat -safe 0 -i filelist.txt -c copy merged_f1_to_f8.mp4
```

**参数说明：**
- `-f concat` - 使用 concat 格式
- `-safe 0` - 允许相对路径
- `-i filelist.txt` - 输入文件列表
- `-c copy` - 直接复制流，不重新编码

### 3. 清理临时文件

```bash
rm filelist.txt
```

---

## 二、上传到 Cloudflare R2

### 1. 运行上传脚本

```bash
cd C:/Users/雨下雨停/nano-video
pnpm tsx scripts/upload-local-video-to-r2.ts
```

### 2. 结果

| 项目 | 信息 |
|------|------|
| CDN URL | `https://cdn.nanobananavideo.net/website/showcase/merged-f1-to-f8.mp4` |
| 文件大小 | 46 MB |
| 时长 | 1分4秒 |

---

## 三、一键执行

```bash
# 拼接
cd "D:/雨下雨停/OneDrive/文档/" && for i in {1..8}; do echo "file 'f$i.mp4'"; done > filelist.txt && ffmpeg -f concat -safe 0 -i filelist.txt -c copy merged_f1_to_f8.mp4 && rm filelist.txt

# 上传
cd C:/Users/雨下雨停/nano-video && pnpm tsx scripts/upload-local-video-to-r2.ts
```
